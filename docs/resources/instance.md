---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "vcf_instance Resource - terraform-provider-vcf"
subcategory: ""
description: |-
  
---

# vcf_instance (Resource)

Create an SDDC workflow (bringup) executes automatically the following:

* Configures networking on each host.
* Configures vSAN storage on the hosts.
* Deploys and configures the management stack - vCenter and NSX
* Deploys and configures SDDC Manager which provides the ability to perform Day 2 operations

## Prerequisites

* Cloud Builder appliance

The procedure for deploying the appliance is described in this [KB article](https://docs.vmware.com/en/VMware-Cloud-Foundation/5.1/vcf-deploy/GUID-78EEF782-CF21-4228-97E0-37B8D2165B81.html).
You can use the [Terraform Provider for vSphere](https://github.com/hashicorp/terraform-provider-vsphere) if you wish to fully
automate this with Terraform.

## The following data is required:

* ID of the SDDC instance
* Detailed list of host
* vCenter details
* Cluster details
* Detailed list of Distributed Virtual Switches
* Detailed list of networks
* DNS details
* List of NTP servers
* Name of the task to execute

## The following data is optional:

* vSAN details
* NSX-T details

Note : In order to configure NSX-T Host Overlay Using a Static IP Pool, please provide ipAddressPoolSpec in nsxtSpec. Otherwise, DHCP will be chosen.

* SDDC Manager details
* List of PSCâ€™s details
* VxManager details
* Name of network pool associated with the management domain
* Version of the Distributed Virtual Switch
* Boolean to identify whether Customer Experience Improvement Program should be enabled
* Boolean to identify whether Federal Information Processing Standards should be enabled
* License for the ESXi hosts
* Boolean to identify if ESXi thumbprint validation is to be skipped
* Security details

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--cluster))
- `dns` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--dns))
- `dv_switch_version` (String) The version of the distributed virtual switches to be used. One among: 7.0.0, 7.0.2, 7.0.3, 8.0.0
- `dvs` (Block List, Min: 1) (see [below for nested schema](#nestedblock--dvs))
- `host` (Block List, Min: 1) (see [below for nested schema](#nestedblock--host))
- `instance_id` (String) Client string that identifies an SDDC by name or instance name. Used for management domain name. Can contain only letters, numbers and the following symbols: '-'. Example: "sfo01-m01", Length 3-20 characters
- `management_pool_name` (String) A string identifying the network pool associated with the management domain
- `network` (Block List, Min: 1) (see [below for nested schema](#nestedblock--network))
- `ntp_servers` (List of String) List of NTP servers
- `skip_esx_thumbprint_validation` (Boolean) Skip ESXi thumbprint validation
- `vcenter` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--vcenter))

### Optional

- `ceip_enabled` (Boolean) Enable VCF Customer Experience Improvement Program
- `esx_license` (String, Sensitive)
- `fips_enabled` (Boolean) Enable Federal Information Processing Standards
- `nsx` (Block List, Max: 1) (see [below for nested schema](#nestedblock--nsx))
- `psc` (Block List) Parameters for deployment/configuration of Platform Services Controller (see [below for nested schema](#nestedblock--psc))
- `sddc_manager` (Block List, Max: 1) (see [below for nested schema](#nestedblock--sddc_manager))
- `security` (Block List, Max: 1) (see [below for nested schema](#nestedblock--security))
- `task_name` (String)
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- `vsan` (Block List, Max: 1) (see [below for nested schema](#nestedblock--vsan))
- `vx_manager` (Block List, Max: 1) (see [below for nested schema](#nestedblock--vx_manager))

### Read-Only

- `creation_timestamp` (String) SDDC Task creation timestamp
- `id` (String) SDDC ID.
- `sddc_manager_fqdn` (String) FQDN of the resulting SDDC Manager
- `sddc_manager_id` (String) ID of the resulting SDDC Manager
- `sddc_manager_version` (String) Version of the resulting SDDC Manager
- `status` (String) SDDC creation Task status

<a id="nestedblock--cluster"></a>
### Nested Schema for `cluster`

Required:

- `cluster_name` (String) vCenter Cluster Name

Optional:

- `cluster_evc_mode` (String) vCenter cluster EVC mode
- `cluster_image_enabled` (Boolean) Whether to enable vSphere Lifecycle Manager images for this cluster
- `host_failures_to_tolerate` (Number) Host failures to tolerate. In between 0 and 3
- `resource_pool` (Block List) (see [below for nested schema](#nestedblock--cluster--resource_pool))
- `vm_folder` (Map of String) Virtual Machine folders map. One among: MANAGEMENT, NETWORKING

<a id="nestedblock--cluster--resource_pool"></a>
### Nested Schema for `cluster.resource_pool`

Required:

- `name` (String) Resource Pool name

Optional:

- `cpu_limit` (Number) CPU limit, default -1 (unlimited)
- `cpu_reservation_expandable` (Boolean) Is CPU reservation expandable, default true
- `cpu_reservation_mhz` (Number) CPU reservation in Mhz
- `cpu_reservation_percentage` (Number) CPU reservation percentage, from 0 to 100, default 0
- `cpu_shares_level` (String) CPU shares level, default 'normal', possible values: "custom", "high", "low", "normal"
- `cpu_shares_value` (Number) CPU shares value, only required when shares level is 'normal'
- `memory_limit` (Number) Memory limit, default -1 (unlimited)
- `memory_reservation_expandable` (Boolean) Is Memory reservation expandable, default true
- `memory_reservation_mb` (Number) Memory reservation in MB
- `memory_reservation_percentage` (Number) Memory reservation percentage, from 0 to 100, default 0
- `memory_shares_level` (String) Memory shares level, default 'normal', possible values: "custom", "high", "low", "normal"
- `memory_shares_value` (Number) Memory shares value, only required when shares level is 'normal'
- `type` (String) Type of resource pool, possible values: "management", "compute", "network"



<a id="nestedblock--dns"></a>
### Nested Schema for `dns`

Required:

- `domain` (String) Tenant domain. Parent tenant domain including TLD suffix Example: vmware.com

Optional:

- `name_server` (String) Primary nameserver IPv4 address. Example: 172.0.0.4
- `secondary_name_server` (String) Secondary nameserver IPv4 address. Example: 172.0.0.5


<a id="nestedblock--dvs"></a>
### Nested Schema for `dvs`

Required:

- `dvs_name` (String) DVS Name
- `networks` (List of String) Types of networks in this portgroup. Possible values: VSAN, VMOTION, MANAGEMENT, VM_MANAGEMENT
- `vmnics` (List of String) Vmnics to be attached to the DVS

Optional:

- `is_used_by_nsxt` (Boolean) Flag indicating whether the DVS is used by NSX
- `mtu` (Number) DVS MTU (default value is 9000). In between 1500 and 9000
- `nioc` (Block List) List of NIOC specs for networks (see [below for nested schema](#nestedblock--dvs--nioc))

<a id="nestedblock--dvs--nioc"></a>
### Nested Schema for `dvs.nioc`

Required:

- `traffic_type` (String) Traffic Type One among:VSAN, VMOTION, VIRTUALMACHINE, MANAGEMENT, NFS, VDP, HBR, FAULTTOLERANCE, ISCSI
- `value` (String) NIOC Value. Example: LOW, NORMAL, HIGH



<a id="nestedblock--host"></a>
### Nested Schema for `host`

Required:

- `association` (String) Host Association: Location/Datacenter
- `hostname` (String) ESXi hostname. If just the short hostname is provided, then FQDN will be generated using the "domain" from dns configuration. Must also adhere to RFC 1123 naming conventions. Example: "esx-1" length from 3 to 63
- `ip_address_private` (Block List, Min: 1, Max: 1) Host Private Management IP (see [below for nested schema](#nestedblock--host--ip_address_private))
- `vswitch` (String) Host vSwitch name

Optional:

- `credentials` (Block List, Max: 1) (see [below for nested schema](#nestedblock--host--credentials))
- `ssh_thumbprint` (String) Host SSH thumbprint (RSA SHA256)
- `ssl_thumbprint` (String) Host SSH thumbprint (RSA SHA256)

<a id="nestedblock--host--ip_address_private"></a>
### Nested Schema for `host.ip_address_private`

Required:

- `gateway` (String) Gateway
- `ip_address` (String) IP Address

Optional:

- `cidr` (String) Classless Inter-Domain Routing (CIDR), Example: 172.0.0.0/24
- `subnet` (String) Subnet


<a id="nestedblock--host--credentials"></a>
### Nested Schema for `host.credentials`

Required:

- `password` (String)
- `username` (String)



<a id="nestedblock--network"></a>
### Nested Schema for `network`

Required:

- `mtu` (String) MTU size
- `network_type` (String) Network Type. One among: VSAN, VMOTION, MANAGEMENT, VM_MANAGEMENT or any custom network type
- `vlan_id` (String) VLAN Id

Optional:

- `active_up_links` (List of String) Active Uplinks for teaming policy, specify uplink1 for failover_explicit VSAN Teaming Policy
- `exclude_ip_address_ranges` (List of String) IP Address ranges to be excluded
- `exclude_ip_addresses` (List of String) IP Addresses to be excluded
- `gateway` (String)
- `include_ip_address` (List of String)
- `include_ip_address_ranges` (Block List) (see [below for nested schema](#nestedblock--network--include_ip_address_ranges))
- `port_group_key` (String) Portgroup key name. When adding a cluster with a new DVS, this value must be provided. When adding a cluster to an existing DVS, this value must not be provided.
- `standby_uplinks` (List of String) Standby Uplinks for teaming policy, specify uplink2 for failover_explicit VSAN Teaming Policy
- `subnet` (String)
- `subnet_mask` (String)
- `teaming_policy` (String) Teaming Policy for VSAN and VMOTION network types, Default is loadbalance_loadbased. One among: loadbalance_ip, loadbalance_srcmac, loadbalance_srcid, failover_explicit, loadbalance_loadbased

<a id="nestedblock--network--include_ip_address_ranges"></a>
### Nested Schema for `network.include_ip_address_ranges`

Required:

- `end_ip_address` (String) End IPv4 Address
- `start_ip_address` (String) Start IPv4 Address


<a id="nestedblock--vcenter"></a>
### Nested Schema for `vcenter`

Required:

- `root_vcenter_password` (String, Sensitive) vCenter root password. The password must be between 8 characters and 20 characters long. It must also contain at least one uppercase and lowercase letter, one number, and one character from '! " # $ % & ' ( ) * + , - . / : ; < = > ? @ [ \ ] ^ _ ` { &Iota; } ~' and all characters must be ASCII. Space is not allowed in password.
- `vcenter_hostname` (String) vCenter Server hostname address. If just the short hostname is provided, then FQDN will be generated using the "domain" from dns configuration

Optional:

- `license` (String) vCenter License
- `ssh_thumbprint` (String) vCenter Server SSH thumbprint (RSA SHA256)
- `ssl_thumbprint` (String) vCenter Server SSL thumbprint (SHA256)
- `storage_size` (String) vCenter VM storage size. One among:lstorage, xlstorage
- `vcenter_ip` (String) vCenter Server IPv4 address
- `vm_size` (String) vCenter Server Appliance  size. One among: tiny, small, medium, large, xlarge


<a id="nestedblock--nsx"></a>
### Nested Schema for `nsx`

Required:

- `nsx_manager` (Block List, Min: 1) Parameters for NSX manager (see [below for nested schema](#nestedblock--nsx--nsx_manager))
- `nsx_manager_size` (String) NSX-T Manager size. One among: medium, large
- `root_nsx_manager_password` (String, Sensitive) NSX Manager root password. Password should have 1) At least eight characters, 2) At least one lower-case letter, 3) At least one upper-case letter 4) At least one digit 5) At least one special character, 6) At least five different characters , 7) No dictionary words, 6) No palindromes
- `transport_vlan_id` (Number) Transport VLAN ID
- `vip` (String) Virtual IP address which would act as proxy/alias for NSX Managers
- `vip_fqdn` (String) FQDN for VIP so that common SSL certificates can be installed across all managers

Optional:

- `ip_address_pool` (Block List, Max: 1) NSX IP address pool specification (see [below for nested schema](#nestedblock--nsx--ip_address_pool))
- `license` (String, Sensitive) NSX Manager license
- `nsx_admin_password` (String, Sensitive) NSX admin password. The password must be at least 12 characters long. Must contain at-least 1 uppercase, 1 lowercase, 1 special character and 1 digit. In addition, a character cannot be repeated 3 or more times consecutively.
- `nsx_audit_password` (String, Sensitive) NSX audit password. The password must be at least 12 characters long. Must contain at-least 1 uppercase, 1 lowercase, 1 special character and 1 digit. In addition, a character cannot be repeated 3 or more times consecutively.
- `overlay_transport_zone` (Block List, Max: 1) NSX OverLay Transport zone (see [below for nested schema](#nestedblock--nsx--overlay_transport_zone))

<a id="nestedblock--nsx--nsx_manager"></a>
### Nested Schema for `nsx.nsx_manager`

Optional:

- `hostname` (String) NSX Manager hostname. If just the short hostname is provided, then FQDN will be generated using the "domain" from dns configuration
- `ip` (String) NSX Manager IPv4 Address


<a id="nestedblock--nsx--ip_address_pool"></a>
### Nested Schema for `nsx.ip_address_pool`

Required:

- `name` (String) Providing only name of existing IP Address Pool reuses it, while providing a new name with subnets creates a new one

Optional:

- `description` (String) Description of the IP address pool
- `ignore_unavailable_nsx_cluster` (Boolean) Ignore unavailable NSX cluster(s) during IP pool spec validation
- `subnet` (Block List) List of IP address pool subnet specifications (see [below for nested schema](#nestedblock--nsx--ip_address_pool--subnet))

<a id="nestedblock--nsx--ip_address_pool--subnet"></a>
### Nested Schema for `nsx.ip_address_pool.subnet`

Required:

- `cidr` (String) The subnet representation, contains the network address and the prefix length
- `gateway` (String) The default gateway address of the network

Optional:

- `ip_address_pool_range` (Block List) List of the IP allocation ranges. At least 1 IP address range has to be specified (see [below for nested schema](#nestedblock--nsx--ip_address_pool--subnet--ip_address_pool_range))

<a id="nestedblock--nsx--ip_address_pool--subnet--ip_address_pool_range"></a>
### Nested Schema for `nsx.ip_address_pool.subnet.ip_address_pool_range`

Required:

- `end` (String) The last IP Address of the IP Address Range
- `start` (String) The first IP Address of the IP Address Range




<a id="nestedblock--nsx--overlay_transport_zone"></a>
### Nested Schema for `nsx.overlay_transport_zone`

Required:

- `network_name` (String) Transport zone network name
- `zone_name` (String) Transport zone name



<a id="nestedblock--psc"></a>
### Nested Schema for `psc`

Required:

- `admin_user_sso_password` (String) Admin user sso password. Password needs to be a strong password with at least one Uppercase alphabet, one lowercase alphabet, one digit and one special character specified in braces [!$%^] and 8-20 characters in length,and 3 maximum identical adjacent characters!

Optional:

- `psc_sso_domain` (String) PSC SSO Domain. Example: vsphere.local


<a id="nestedblock--sddc_manager"></a>
### Nested Schema for `sddc_manager`

Optional:

- `hostname` (String) SDDC Manager Hostname. If just the short hostname is provided, then FQDN will be generated using the "domain" from dns configuration, length 3-63
- `ip_address` (String) SDDC Manager IPv4 address
- `local_user_password` (String) The local account is a built-in admin account (password for the break glass user admin@local) in VCF that can be used in emergency scenarios. The password of this account must be at least 12 characters long. It also must contain at-least 1 uppercase, 1 lowercase, 1 special character specified in braces [!%@$^#?] and 1 digit. In addition, a character cannot be repeated more than 3 times consecutively.
- `root_user_credentials` (Block List, Max: 1) Root user credentials for the SDDC Manager VM, UserName must be root. Password needs to be a strong password with at least one alphabet and one special character and at least 8 characters in length. (see [below for nested schema](#nestedblock--sddc_manager--root_user_credentials))
- `second_user_credentials` (Block List, Max: 1) Second user credentials for the SDDC Manager VM, UserName must be vcf.  Password needs to be a strong password with at least one alphabet and one special character and at least 8 characters in length. (see [below for nested schema](#nestedblock--sddc_manager--second_user_credentials))

<a id="nestedblock--sddc_manager--root_user_credentials"></a>
### Nested Schema for `sddc_manager.root_user_credentials`

Required:

- `password` (String)
- `username` (String)


<a id="nestedblock--sddc_manager--second_user_credentials"></a>
### Nested Schema for `sddc_manager.second_user_credentials`

Required:

- `password` (String)
- `username` (String)



<a id="nestedblock--security"></a>
### Nested Schema for `security`

Optional:

- `esxi_certs_mode` (String) ESXi certificates mode. One among: Custom, VMCA
- `root_ca_certs` (Block List) Root Certificate Authority certificate list (see [below for nested schema](#nestedblock--security--root_ca_certs))

<a id="nestedblock--security--root_ca_certs"></a>
### Nested Schema for `security.root_ca_certs`

Optional:

- `alias` (String) Certificate alias
- `cert_chain` (List of String) List of Base64 encoded certificates



<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)


<a id="nestedblock--vsan"></a>
### Nested Schema for `vsan`

Required:

- `datastore_name` (String) Datastore Name

Optional:

- `esa_enabled` (Boolean) Enable vSAN ESA
- `hcl_file` (String) A path (URL or local path) to an HCL file that will be uploaded to vCenter prior to configuring vSAN
- `license` (String) VSAN License
- `vsan_dedup` (Boolean) VSAN feature Deduplication and Compression flag, one flag for both features


<a id="nestedblock--vx_manager"></a>
### Nested Schema for `vx_manager`

Required:

- `vx_manager_hostname` (String) VxManager host name

Optional:

- `default_admin_user_credentials` (Block List, Max: 1) (see [below for nested schema](#nestedblock--vx_manager--default_admin_user_credentials))
- `default_root_user_credentials` (Block List, Max: 1) (see [below for nested schema](#nestedblock--vx_manager--default_root_user_credentials))
- `ssh_thumbprint` (String) VxRail Manager SSH thumbprint (RSA SHA256)
- `ssl_thumbprint` (String) VxRail Manager SSL thumbprint (SHA256)

<a id="nestedblock--vx_manager--default_admin_user_credentials"></a>
### Nested Schema for `vx_manager.default_admin_user_credentials`

Required:

- `password` (String)
- `username` (String)


<a id="nestedblock--vx_manager--default_root_user_credentials"></a>
### Nested Schema for `vx_manager.default_root_user_credentials`

Required:

- `password` (String)
- `username` (String)
