---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "vcf_domain Resource - terraform-provider-vcf"
subcategory: ""
description: |-
  
---

# vcf_domain (Resource)

A workload domain is a policy based resource container with specific availability and performance attributes that combines compute (vSphere),
storage (vSAN/NFS/VMFS on FC/VVOL) and networking (NSX) into a single consumable entity.

Prerequisites for creating a workload domain:
* Name of the domain
* vCenter details
  * Name of the vCenter
  * Network details
    * IP Address of the vCenter
    * FQDN of the vCenter
    * Gateway
    * Subnet mask 
  * Password for the root user (8-20 characters)
  * Name of the datacenter where vCenter needs to be deployed
* List of clusters, For each cluster
  * Name of the cluster
  * List of hosts, For each host
    * ID of the host (UUID)
    * License key for the host
    * List of VDS names to associate with host
    * ID of the vmNic host to be associated with VDS, once added to cluster
* Datastore details

The Create Domain workflow automatically:

* Deploys an additional vCenter Server Appliance for the new domain within the management domain.
* By leveraging a separate vCenter Server instance per domain, software updates can be applied without impacting other domains. It also allows for each domain to have additional isolation as needed.
* Connects the specified ESXi servers to this vCenter Server instance and groups them into a cluster. Each host is configured with the port groups applicable for the domain.
* Configures networking on each ESXi host.
* If vSAN or NFS storage is provided, they are configured on the ESXi hosts. If VMFS on FC storage provided, itâ€™s consumed.
* For the first domain in your environment, the workflow deploys a cluster of three NSX-T Managers in the management domain. The workflow also configures an anti-affinity rule between the managers to prevent them from being on the same host for High Availability. Each subsequent NSX-T domains will share this NSX-T Manager Cluster or create its own.
* From NSX-T version 3.0 onwards NSX-T manager uses vSphere Distributed Switch(VDS) created by vCenter to configure transport nodes and handle overlay traffic.
* In case of single vSphere Distributed Switch domain, the same vSphere Distributed Switch will be used for configuring overlay traffic.
* For a domain which creates multiple vSphere Distributed Switches, the boolean isUsedByNsxt in the VdsSpec should be set to true to identify the vSphere Distributed Switch which should be used by NSX-T for configuring overlay traffic. Refer to: VdsSpec.
* In case of multiple vSphere Distributed Switches, at least one vSphere Distributed Switch has to be marked for use by NSX-T.
* NSX Edges are needed to enable overlay VI networks and public networks for north-south traffic. Note that edges need to be deployed separately.
* Clusters part of the domain can be configured to use IP address pools to assign IP addresses for the TEP interfaces of the hosts by specifying IpAddressPoolSpec inside the NsxTClusterSpec. If the IpAddressPoolSpec is not specified in the input spec, IP addresses for the TEP interfaces of the host are assigned from DHCP.

The result is a workload-ready SDDC environment.


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster` (Block List, Min: 1) Specification representing the clusters to be added to the workload domain (see [below for nested schema](#nestedblock--cluster))
- `name` (String) Name of the domain (from 3 to 20 characters)
- `sso` (Block List, Min: 1) SSO configuration for the workload domain (see [below for nested schema](#nestedblock--sso))
- `vcenter_configuration` (Block List, Min: 1, Max: 1) Specification describing vCenter Server instance settings (see [below for nested schema](#nestedblock--vcenter_configuration))

### Optional

- `nsx_configuration` (Block List, Max: 1) Specification details for NSX configuration (see [below for nested schema](#nestedblock--nsx_configuration))
- `org_name` (String) Organization name of the workload domain
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) The ID of this resource.
- `is_management_sso_domain` (Boolean) Shows whether the workload domain is joined to the management domain SSO
- `sso_id` (String) ID of the SSO domain associated with the workload domain
- `sso_name` (String) Name of the SSO domain associated with the workload domain
- `status` (String) Status of the workload domain
- `type` (String) Type of the workload domain

<a id="nestedblock--cluster"></a>
### Nested Schema for `cluster`

Required:

- `host` (Block List, Min: 2) List of ESXi host information from the free pool to consume in a workload domain (see [below for nested schema](#nestedblock--cluster--host))
- `name` (String) Name of the cluster to add to the workload domain
- `vds` (Block List, Min: 1) vSphere Distributed Switches to add to the cluster (see [below for nested schema](#nestedblock--cluster--vds))

Optional:

- `cluster_image_id` (String) ID of the cluster image to be used with the cluster
- `evc_mode` (String) EVC mode for new cluster, if needed. One among: INTEL_MEROM, INTEL_PENRYN, INTEL_NEALEM, INTEL_WESTMERE, INTEL_SANDYBRIDGE, INTEL_IVYBRIDGE, INTEL_HASWELL, INTEL_BROADWELL, INTEL_SKYLAKE, INTEL_CASCADELAKE, AMD_REV_E, AMD_REV_F, AMD_GREYHOUND_NO3DNOW, AMD_GREYHOUND, AMD_BULLDOZER, AMD_PILEDRIVER, AMD_STREAMROLLER, AMD_ZEN
- `geneve_vlan_id` (Number) VLAN ID use for NSX Geneve in the workload domain
- `high_availability_enabled` (Boolean) vSphere High Availability settings for the cluster
- `ip_address_pool` (Block List, Max: 1) Contains the parameters required to create or reuse an IP address pool. Omit for DHCP, provide name only to reuse existing IP Pool, if subnets are provided a new IP Pool will be created (see [below for nested schema](#nestedblock--cluster--ip_address_pool))
- `nfs_datastores` (Block List) Cluster storage configuration for NFS (see [below for nested schema](#nestedblock--cluster--nfs_datastores))
- `vmfs_datastore` (Block List, Max: 1) Cluster storage configuration for VMFS (see [below for nested schema](#nestedblock--cluster--vmfs_datastore))
- `vsan_datastore` (Block List, Max: 1) Cluster storage configuration for vSAN (see [below for nested schema](#nestedblock--cluster--vsan_datastore))
- `vsan_remote_datastore_cluster` (Block List, Max: 1) Cluster storage configuration for vSAN Remote Datastore (see [below for nested schema](#nestedblock--cluster--vsan_remote_datastore_cluster))
- `vsan_stretch_configuration` (Block List, Max: 1) Settings for stretched vSAN clusters (see [below for nested schema](#nestedblock--cluster--vsan_stretch_configuration))
- `vvol_datastores` (Block List) Cluster storage configuration for VVOL (see [below for nested schema](#nestedblock--cluster--vvol_datastores))

Read-Only:

- `id` (String) ID of the cluster
- `is_default` (Boolean) Status of the cluster if default or not
- `is_stretched` (Boolean) Status of the cluster if stretched or not
- `primary_datastore_name` (String) Name of the primary datastore
- `primary_datastore_type` (String) Storage type of the primary datastore

<a id="nestedblock--cluster--host"></a>
### Nested Schema for `cluster.host`

Required:

- `id` (String) ID of the ESXi host in the free pool

Optional:

- `availability_zone_name` (String) Availability Zone Name. This is required while performing a stretched cluster expand operation
- `host_name` (String) Host name of the ESXi host
- `ip_address` (String) IPv4 address of the ESXi host
- `password` (String, Sensitive) Password to authenticate to the ESXi host
- `serial_number` (String) Serial number of the ESXi host
- `ssh_thumbprint` (String, Sensitive) SSH thumbprint of the ESXi host
- `username` (String) Username to authenticate to the ESXi host
- `vmnic` (Block List) vmnic configuration for the ESXi host (see [below for nested schema](#nestedblock--cluster--host--vmnic))

<a id="nestedblock--cluster--host--vmnic"></a>
### Nested Schema for `cluster.host.vmnic`

Required:

- `id` (String) ESXI host vmnic ID to be associated with a VDS, once added to cluster

Optional:

- `uplink` (String) Uplink to be associated with vmnic
- `vds_name` (String) Name of the VDS to associate with the ESXi host



<a id="nestedblock--cluster--vds"></a>
### Nested Schema for `cluster.vds`

Required:

- `name` (String) vSphere Distributed Switch name

Optional:

- `is_used_by_nsx` (Boolean) Identifies if the vSphere distributed switch is used by NSX
- `nioc_bandwidth_allocations` (Block List) List of Network I/O Control Bandwidth Allocations for System Traffic based on shares, reservation, and limit, you can configure Network I/O Control to allocate certain amount of bandwidth for traffic generated by vSphere Fault Tolerance, iSCSI storage, vSphere vMotion, and so on. You can use Network I/O Control on a distributed switch to configure bandwidth allocation for the traffic  that is related to the main system features in vSphere (see [below for nested schema](#nestedblock--cluster--vds--nioc_bandwidth_allocations))
- `portgroup` (Block List) List of portgroups to be associated with the vSphere Distributed Switch (see [below for nested schema](#nestedblock--cluster--vds--portgroup))

<a id="nestedblock--cluster--vds--nioc_bandwidth_allocations"></a>
### Nested Schema for `cluster.vds.nioc_bandwidth_allocations`

Required:

- `type` (String) Host infrastructure traffic type. Example: management, faultTolerance, vmotion, virtualMachine, iSCSI, nfs, hbr, vsan, vdp etc.

Optional:

- `limit` (Number) The maximum allowed usage for a traffic class belonging to this resource pool per host physical NIC. The utilization of a traffic class will not exceed the specified limit even if there are available network resources. If this value is unset or set to -1 in an update operation, then there is no limit on the network resource usage (only bounded by available resource and shares). Units are in Mbits/sec
- `reservation` (Number) Amount of bandwidth resource that is guaranteed available to the host infrastructure traffic class. If the utilization is less than the reservation, the extra bandwidth is used for other host infrastructure traffic class types. Unit is Mbits/sec
- `shares` (Number) The number of shares allocated. Used to determine resource allocation in case of resource contention. This value is only set if level is set to custom. If level is not set to custom, this value is ignored. Therefore, only shares with custom values can be compared. There is no unit for this value. It is a relative measure based on the settings for other resource pools.
- `shares_level` (String) The allocation level. The level is a simplified view of shares. Levels map to a pre-determined set of numeric values for shares. If the shares value does not map to a predefined size, then the level is set as custom. One among: low, normal, high, custom


<a id="nestedblock--cluster--vds--portgroup"></a>
### Nested Schema for `cluster.vds.portgroup`

Required:

- `name` (String) Port group name
- `transport_type` (String) Port group transport type, One among: VSAN, VMOTION, MANAGEMENT, PUBLIC, NFS, VREALIZE, ISCSI, EDGE_INFRA_OVERLAY_UPLINK

Optional:

- `active_uplinks` (List of String) List of active uplinks associated with portgroup. This is only supported for VxRail.



<a id="nestedblock--cluster--ip_address_pool"></a>
### Nested Schema for `cluster.ip_address_pool`

Required:

- `name` (String) Providing only name of existing IP Address Pool reuses it, while providing a new name with subnets creates a new one

Optional:

- `description` (String) Description of the IP address pool
- `ignore_unavailable_nsx_cluster` (Boolean) Ignore unavailable NSX cluster(s) during IP pool spec validation
- `subnet` (Block List) List of IP address pool subnet specifications (see [below for nested schema](#nestedblock--cluster--ip_address_pool--subnet))

<a id="nestedblock--cluster--ip_address_pool--subnet"></a>
### Nested Schema for `cluster.ip_address_pool.subnet`

Required:

- `cidr` (String) The subnet representation, contains the network address and the prefix length
- `gateway` (String) The default gateway address of the network

Optional:

- `ip_address_pool_range` (Block List) List of the IP allocation ranges. At least 1 IP address range has to be specified (see [below for nested schema](#nestedblock--cluster--ip_address_pool--subnet--ip_address_pool_range))

<a id="nestedblock--cluster--ip_address_pool--subnet--ip_address_pool_range"></a>
### Nested Schema for `cluster.ip_address_pool.subnet.ip_address_pool_range`

Required:

- `end` (String) The last IP Address of the IP Address Range
- `start` (String) The first IP Address of the IP Address Range




<a id="nestedblock--cluster--nfs_datastores"></a>
### Nested Schema for `cluster.nfs_datastores`

Required:

- `datastore_name` (String) NFS datastore name used for cluster creation
- `path` (String) Shared directory path used for NFS based cluster creation
- `read_only` (Boolean) Readonly is used to identify whether to mount the directory as readOnly or not
- `server_name` (String) Fully qualified domain name or IP address of the NFS endpoint

Optional:

- `user_tag` (String) User tag used to annotate NFS share


<a id="nestedblock--cluster--vmfs_datastore"></a>
### Nested Schema for `cluster.vmfs_datastore`

Required:

- `datastore_names` (List of String) VMFS datastore names used for VMFS on FC for cluster creation


<a id="nestedblock--cluster--vsan_datastore"></a>
### Nested Schema for `cluster.vsan_datastore`

Required:

- `datastore_name` (String) vSAN datastore name used for cluster creation

Optional:

- `dedup_and_compression_enabled` (Boolean) Enable vSAN deduplication and compression
- `esa_enabled` (Boolean) Enable vSAN ESA
- `failures_to_tolerate` (Number) Number of ESXi host failures to tolerate in the vSAN cluster. One of 0, 1, or 2.


<a id="nestedblock--cluster--vsan_remote_datastore_cluster"></a>
### Nested Schema for `cluster.vsan_remote_datastore_cluster`

Required:

- `datastore_uuids` (List of String) vSAN HCI Mesh remote datastore UUIDs


<a id="nestedblock--cluster--vsan_stretch_configuration"></a>
### Nested Schema for `cluster.vsan_stretch_configuration`

Optional:

- `secondary_fd_host` (Block List) The list of hosts that will go into the secondary fault domain (see [below for nested schema](#nestedblock--cluster--vsan_stretch_configuration--secondary_fd_host))
- `witness_host` (Block List, Max: 1) Configuration for the witness host (see [below for nested schema](#nestedblock--cluster--vsan_stretch_configuration--witness_host))

<a id="nestedblock--cluster--vsan_stretch_configuration--secondary_fd_host"></a>
### Nested Schema for `cluster.vsan_stretch_configuration.secondary_fd_host`

Required:

- `id` (String) ID of the ESXi host in the free pool

Optional:

- `availability_zone_name` (String) Availability Zone Name. This is required while performing a stretched cluster expand operation
- `host_name` (String) Host name of the ESXi host
- `ip_address` (String) IPv4 address of the ESXi host
- `password` (String, Sensitive) Password to authenticate to the ESXi host
- `serial_number` (String) Serial number of the ESXi host
- `ssh_thumbprint` (String, Sensitive) SSH thumbprint of the ESXi host
- `username` (String) Username to authenticate to the ESXi host
- `vmnic` (Block List) vmnic configuration for the ESXi host (see [below for nested schema](#nestedblock--cluster--vsan_stretch_configuration--secondary_fd_host--vmnic))

<a id="nestedblock--cluster--vsan_stretch_configuration--secondary_fd_host--vmnic"></a>
### Nested Schema for `cluster.vsan_stretch_configuration.secondary_fd_host.vmnic`

Required:

- `id` (String) ESXI host vmnic ID to be associated with a VDS, once added to cluster

Optional:

- `uplink` (String) Uplink to be associated with vmnic
- `vds_name` (String) Name of the VDS to associate with the ESXi host



<a id="nestedblock--cluster--vsan_stretch_configuration--witness_host"></a>
### Nested Schema for `cluster.vsan_stretch_configuration.witness_host`

Required:

- `fqdn` (String) Fully qualified domain name of the witness host. It should be routable on the vSAN network
- `vsan_cidr` (String) CIDR address for the witness host on the vSAN network
- `vsan_ip` (String) IP address for the witness host on the vSAN network



<a id="nestedblock--cluster--vvol_datastores"></a>
### Nested Schema for `cluster.vvol_datastores`

Required:

- `datastore_name` (String) vVol datastore name used for cluster creation
- `storage_container_id` (String) UUID of the VASA storage container
- `storage_protocol_type` (String) Type of the VASA storage protocol. One among: ISCSI, NFS, FC.
- `user_id` (String) UUID of the VASA storage user
- `vasa_provider_id` (String) UUID of the VASA storage provider



<a id="nestedblock--sso"></a>
### Nested Schema for `sso`

Required:

- `domain_name` (String) Name of the SSO domain
- `domain_password` (String, Sensitive) Password of the SSO domain


<a id="nestedblock--vcenter_configuration"></a>
### Nested Schema for `vcenter_configuration`

Required:

- `datacenter_name` (String) vSphere datacenter name
- `fqdn` (String) Fully qualified domain name of the vCenter Server instance
- `gateway` (String) IPv4 gateway of the vCenter Server instance
- `ip_address` (String) IPv4 address of the vCenter virtual machine
- `name` (String) Name of the vCenter Server Appliance virtual machine to be created for the workload domain
- `root_password` (String, Sensitive) root password for the vCenter Server Appliance (8-20 characters)
- `subnet_mask` (String) IPv4 subnet mask of the vCenter Server instance

Optional:

- `storage_size` (String) vCenter Server storage size. One among: lstorage, xlstorage
- `vm_size` (String) vCenter Server instance size. One among: tiny, small, medium, large, xlarge

Read-Only:

- `id` (String) ID of the vCenter Server instance


<a id="nestedblock--nsx_configuration"></a>
### Nested Schema for `nsx_configuration`

Required:

- `nsx_manager_admin_password` (String, Sensitive) NSX Manager admin user password
- `nsx_manager_node` (Block List, Min: 1) Specification details of the NSX Manager virtual machines. 3 of these are required for the first workload domain (see [below for nested schema](#nestedblock--nsx_configuration--nsx_manager_node))
- `vip` (String) Virtual IP (VIP) for the NSX Manager cluster
- `vip_fqdn` (String) Fully qualified domain name of the NSX Manager cluster VIP

Optional:

- `form_factor` (String) Form factor for the NSX Manager appliance. One among: large, medium, small
- `nsx_manager_audit_password` (String, Sensitive) NSX Manager audit user password

Read-Only:

- `id` (String) ID of the NSX Manager cluster

<a id="nestedblock--nsx_configuration--nsx_manager_node"></a>
### Nested Schema for `nsx_configuration.nsx_manager_node`

Required:

- `fqdn` (String) Fully qualified domain name of the NSX Manager appliance, e.g., sfo-w01-nsx01a.sfo.rainpole.io
- `gateway` (String) IPv4 gateway the NSX Manager appliance
- `ip_address` (String) IPv4 address of the NSX Manager appliance
- `name` (String) Name of the NSX Manager appliance, e.g., sfo-w01-nsx01
- `subnet_mask` (String) IPv4 subnet mask for the NSX Manager appliance



<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `read` (String)
- `update` (String)
